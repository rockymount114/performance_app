{% extends 'webapp/base.html' %}
{% block title %}Create Measure{% endblock title %}
{% load crispy_forms_tags %}
{% block content %}

    <body>

        <div class="container bg-light shadow-md p-5 form-layout">

            <h3> Create a Measure </h3>
            <h6> Start adding in the required details for your measure. </h6>
            <hr>

            <form method="POST" autocomplete="off" >

                {% csrf_token %}  
                {% comment %} {{form.as_p}} {% endcomment %}

                {{ form.department|as_crispy_field }}
                {{ form.fiscal_year|as_crispy_field }}
                {{ form.objective|as_crispy_field }}
                {{ form.title|as_crispy_field }}
                {{ form.direction|as_crispy_field }}
                {{ form.frequency|as_crispy_field }}
                
            
                {{ form.is_number|as_crispy_field }}
                <div id="target_number_field" style="display: none;">
                  {{ form.target_number|as_crispy_field }}
                </div>
                <div id="target_rate_field" style="display: none;">
                  {{ form.target_rate|as_crispy_field }}
                </div>
                


                


                <br>
                <button type="submit" class="btn btn-primary">                     
                    Create a measure &nbsp; <i class="fa fa-check" aria-hidden="true"></i>
                </button>
                &nbsp;
                <a href="javascript:history.go(-1)" class="btn btn-secondary"> 
                    Return &nbsp; <i class="fa fa-arrow-left" aria-hidden="true"></i>
                </a>
            </form>
        </div>
        <br>

        <!-- for dropdown list -->
<!-- 
        {% comment %} <script src="https://releases.jquery.com/git/jquery-git.js"></script>

        <script>
            $("#id_site").change(function () {
                const url = $("#recordForm").attr("data-cities-url");  // get the url of the `load_cities` view
                const siteId = $(this).val();  
        
                $.ajax({                       
                    url: url,                    // set the url of the request (= /persons/ajax/load-cities/ )
                    data: {
                        'site_id': siteId       
                    },
                    success: function (data) {   // `data` is the return of the `load_cities` view function

                        $("#id_location").html(data);  // replace the contents of the city input with the data that came from the server
                       
                    }
                });
        
            });
        </script> {% endcomment %} -->

        

    </body>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script>
    $(document).ready(function() {
      // Hide the target fields initially
      $('#target_number_field').hide();
      $('#target_rate_field').hide();
    
      // Listen for changes in the is_number field
      $('#id_is_number').change(function() {
        if ($(this).val() === 'True') {
          // Show target_number field and hide target_rate field
          $('#target_number_field').show();
          $('#target_rate_field').hide();
        } else if ($(this).val() === 'False') {
          // Show target_rate field and hide target_number field
          $('#target_rate_field').show();
          $('#target_number_field').hide();
        } else {
          // Hide both fields if no option is selected
          $('#target_number_field').hide();
          $('#target_rate_field').hide();
        }
      });
    });
    </script>




{% endblock %}




